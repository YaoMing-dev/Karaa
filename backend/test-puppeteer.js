const puppeteer = require('puppeteer');

async function testPuppeteer() {
  console.log('ğŸ”„ Testing Puppeteer...');

  try {
    console.log('ğŸ“¦ Launching browser...');
    const browser = await puppeteer.launch({
      headless: 'new',
      args: [
        '--no-sandbox',
        '--disable-setuid-sandbox',
        '--disable-dev-shm-usage',
        '--disable-accelerated-2d-canvas',
        '--disable-gpu'
      ]
    });

    console.log('âœ… Browser launched successfully!');

    console.log('ğŸ“„ Creating new page...');
    const page = await browser.newPage();

    console.log('âœï¸  Setting HTML content...');
    await page.setContent('<html><body><h1>Test PDF</h1><p>This is a test PDF generated by Puppeteer.</p></body></html>');

    console.log('ğŸ“¥ Generating PDF...');
    const pdf = await page.pdf({
      format: 'A4',
      printBackground: true
    });

    console.log(`âœ… PDF generated successfully! Size: ${pdf.length} bytes`);

    await browser.close();
    console.log('âœ… Browser closed');
    console.log('\nğŸ‰ Puppeteer is working correctly!');

  } catch (error) {
    console.error('âŒ Puppeteer test failed:', error.message);
    console.error('Full error:', error);
    process.exit(1);
  }
}

testPuppeteer();
